{
  "Entries": [
    {
      "RequestUri": "https://management.azure.com/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba?api-version=2022-12-01",
      "RequestMethod": "GET",
      "RequestHeaders": {
        "Accept": "application/json",
        "Authorization": "Sanitized",
        "traceparent": "00-45c8b1c3e2f54789beaee63606eaa091-e24130a5e595d86f-00",
        "User-Agent": "azsdk-net-ResourceManager/1.7.0 (.NET 6.0.23; Microsoft Windows 10.0.22621)",
        "x-ms-client-request-id": "a8e686aef58fbb64f19647f87a53dbd2",
        "x-ms-return-client-request-id": "true"
      },
      "RequestBody": null,
      "StatusCode": 200,
      "ResponseHeaders": {
        "Cache-Control": "no-cache",
        "Content-Length": "468",
        "Content-Type": "application/json; charset=utf-8",
        "Date": "Tue, 24 Oct 2023 13:19:27 GMT",
        "Expires": "-1",
        "Pragma": "no-cache",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains",
        "X-Content-Type-Options": "nosniff",
        "x-ms-correlation-request-id": "18b219ca-6db1-4d80-a56d-26081abf3206",
        "x-ms-ratelimit-remaining-subscription-reads": "11989",
        "x-ms-request-id": "18b219ca-6db1-4d80-a56d-26081abf3206",
        "x-ms-routing-request-id": "CENTRALUS:20231024T131927Z:18b219ca-6db1-4d80-a56d-26081abf3206"
      },
      "ResponseBody": {
        "id": "/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba",
        "authorizationSource": "RoleBased",
        "managedByTenants": [
          {
            "tenantId": "2f4a9838-26b7-47ee-be60-ccc1fdec5953"
          }
        ],
        "subscriptionId": "6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba",
        "tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
        "displayName": "Azure Triage Resource Provider - Test",
        "state": "Enabled",
        "subscriptionPolicies": {
          "locationPlacementId": "Internal_2014-09-01",
          "quotaId": "Internal_2014-09-01",
          "spendingLimit": "Off"
        }
      }
    },
    {
      "RequestUri": "https://management.azure.com/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba/resourceGroups/DiagnosticsRp-Gateway-Public-Dev-Global/providers/Microsoft.KeyVault/vaults/DiagRpGwPubDev/providers/Microsoft.Help/solutions/testResource8607?api-version=2023-09-01-preview",
      "RequestMethod": "PUT",
      "RequestHeaders": {
        "Accept": "application/json",
        "Authorization": "Sanitized",
        "Content-Length": "165",
        "Content-Type": "application/json",
        "traceparent": "00-17b24d3d5c783ea75cfca5921ec8b89c-c5ab4d31810652fe-00",
        "User-Agent": "azsdk-net-ResourceManager.SelfHelp/1.1.0-alpha.20231024.1 (.NET 6.0.23; Microsoft Windows 10.0.22621)",
        "x-ms-client-request-id": "4f734e548297abea575fbe53900e77fd",
        "x-ms-return-client-request-id": "true"
      },
      "RequestBody": {
        "properties": {
          "triggerCriteria": [
            {
              "name": "SolutionId",
              "value": "keyvault-lostdeletedkeys-apollo-solution"
            }
          ],
          "parameters": {
            "SearchText": "Can not RDP"
          },
          "sections": []
        }
      },
      "StatusCode": 201,
      "ResponseHeaders": {
        "Azure-AsyncOperation": "https://management.azure.com/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba/providers/Microsoft.Help/Solutions/testResource8607/operationResults/40393b7f-d929-4445-823f-f17bf1baf0f2?api-version=2023-09-01-preview",
        "Cache-Control": "no-cache",
        "Content-Length": "6065",
        "Content-Type": "application/json; charset=utf-8",
        "Date": "Tue, 24 Oct 2023 13:19:28 GMT",
        "Expires": "-1",
        "Location": "https://management.azure.com/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba/providers/Microsoft.Help/Solutions/testResource8607/operationResults/40393b7f-d929-4445-823f-f17bf1baf0f2?api-version=2023-09-01-preview",
        "Pragma": "no-cache",
        "Server": "Microsoft-IIS/10.0",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains",
        "X-Content-Type-Options": "nosniff",
        "x-ms-correlation-request-id": "f7ab6c43-bccf-42ba-823e-1cc6812f6e3e",
        "x-ms-ratelimit-remaining-subscription-resource-requests": "499",
        "x-ms-request-id": "f7ab6c43-bccf-42ba-823e-1cc6812f6e3e",
        "x-ms-routing-request-id": "CENTRALUS:20231024T131928Z:f7ab6c43-bccf-42ba-823e-1cc6812f6e3e",
        "X-Powered-By": "ASP.NET"
      },
      "ResponseBody": {
        "id": "/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba/resourceGroups/DiagnosticsRp-Gateway-Public-Dev-Global/providers/Microsoft.KeyVault/vaults/DiagRpGwPubDev/providers/Microsoft.Help/solutions/testResource8607",
        "name": "testResource8607",
        "type": "Microsoft.Help/Solutions",
        "properties": {
          "title": "lost or deleted keys and secrets in key vault",
          "content": "\u003Ch2\u003EResolve issues with soft delete and purge protection in Azure Key Vault\u003C/h2\u003E\n\u003Cp\u003EKey Vault\u0027s soft-delete feature allows recovery of deleted vaults and key vault objects, for example, keys, secrets, and certificates.\u003C/p\u003E\n\u003Cp\u003EThis safeguard offers the following protections:\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003EOnce a secret, key, certificate, or key vault is deleted, it will remain recoverable for a configurable period of 7 to 90 calendar days. If no configuration is specified, the default recovery period will be set to 90 days. This provides users with sufficient time to notice an accidental secret deletion and to respond.\u003C/li\u003E\n\u003Cli\u003ETwo operations must be made to permanently delete a secret. First, a user must delete the object, which puts it into the soft-deleted state. Second, a user must purge the object in the soft-deleted state. The purge operation requires additional access policy permissions. These additional protections reduce the risk of a user accidentally or maliciously deleting a secret or a key vault.\u003C/li\u003E\n\u003Cli\u003ETo purge a secret in the soft-deleted state, a service principal must be granted an additional \u003Cem\u003Epurge\u003C/em\u003E access policy permission. The purge access policy permission isn\u0027t granted by default to any service principal, including key vault and subscription owners, and must be deliberately set. By requiring an elevated access policy permission to purge a soft-deleted secret, it reduces the probability of accidentally deleting a secret.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003EUse the following guidance to resolve common issues with the soft-delete feature, such as not being able to delete a key vault or disabling purge protection, and learn how to enable Key Vault recovery features.\u003C/p\u003E\n\u003Ch3\u003EKey Vault diagnostics\u003C/h3\u003E\n\u003Cp\u003EThe following diagnostics check for any Key Vault issues related to throttling or unauthorized access.\u003C/p\u003E\n\u003C!--30929da5-14c9-433b-99b4-c73771d046c8--\u003E\n\u003Ch3\u003ESoft-delete feature overview\u003C/h3\u003E\n\u003Cul\u003E\n\u003Cli\u003ESee \u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-ovw-soft-delete\u0022\u003EAzure Key Vault soft-delete overview\u003C/a\u003E to learn about backup and restore behavior while using Key Vault\u0027s soft-delete feature.\u003C/li\u003E\n\u003Cli\u003ESee \u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/general/soft-delete-overview#purge-protection\u0022\u003EPurge Protection\u003C/a\u003E.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Ch3\u003ECommon issues and solutions\u003C/h3\u003E\n\u003Cp\u003E\u003Cstrong\u003EWhy can\u0027t I purge a deleted key vault and disable purge protection?\u003C/strong\u003E\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003EWhen purge protection is enabled, a vault or an object in the deleted state can\u0027t be purged until the retention period has passed. Once the retention period elapses, the key vault or key vault object will be purged automatically.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\u003Cstrong\u003ENote\u003C/strong\u003E: Once purge protection is enabled, it can\u0027t be disabled or overridden by anyone, including Microsoft.\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003EYou must wait for the mandatory retention period to elapse before you\u0027re able to permanently delete your key vault or secrets.\u003C/p\u003E\n\u003C/li\u003E\n\u003Cli\u003E\u003Cp\u003EEnsure there is no Azure policy or resource lock in place; you must remove any resource locks to delete a key vault.\u003C/p\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\u003Cstrong\u003EWhy can\u0027t I recover a deleted key vault?\u003C/strong\u003E\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003EIf you deleted a key vault, it\u0027ll exist in the soft-deleted state if you had soft delete enabled on the key vault and if the retention period hasn\u0027t elapsed.\n\u003Cstrong\u003EIf you didn\u0027t have soft delete enabled, or the soft-delete retention period has elapsed, your key vault has been permanently deleted.\u003C/strong\u003E\u003C/p\u003E\n\u003C/li\u003E\n\u003Cli\u003E\u003Cp\u003EUse this reference to \u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/general/key-vault-recovery?tabs=azure-portal#list-recover-or-purge-a-soft-deleted-key-vault\u0022\u003Elist and recover a deleted key vault\u003C/a\u003E.\u003C/p\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Ch3\u003EResources\u003C/h3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-soft-delete-powershell\u0022\u003EUsing soft-delete with Key Vault with PowerShell\u003C/a\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-soft-delete-cli\u0022\u003EUsing soft-delete with Key Vault with CLI 2.0\u003C/a\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-ovw-security-worlds\u0022\u003EUnderstanding backup and restore behavior in Key Vault\u003C/a\u003E\u003C/li\u003E\n\u003C/ul\u003E\n\u003Ch3\u003ERelevant results from the web\u003C/h3\u003E\n\u003C!--080d6e85-2a49-4bf7-9668-20da3efaa2b8--\u003E\n",
          "replacementMaps": {
            "diagnostics": [
              {
                "solutionId": "KeyVaultUnauthorizedAclInsight",
                "status": "Running",
                "statusDetails": "We are running checks on your resource",
                "replacementKey": "\u003C!--30929da5-14c9-433b-99b4-c73771d046c8--\u003E"
              }
            ],
            "webResults": [
              {
                "searchResults": [
                  {
                    "solutionId": "Msdn_aaee81ff-aacd-4adf-8547-98b8d4e27fa4",
                    "content": "...far the connect button is still alive. Can anyone for the love of Mic tell me what\u0027s up with this? My previous post on RDP has not been answered...",
                    "title": "Connect RDP",
                    "confidence": "High",
                    "source": "MSDN",
                    "resultType": "Community",
                    "rank": 1,
                    "link": "http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/aaee81ff-aacd-4adf-8547-98b8d4e27fa4/"
                  },
                  {
                    "solutionId": "articles|virtual-desktop|rdp-shortpath.md",
                    "content": "...RDP Shortpath brings support for configuring Quality of Service (QoS) priority for RDP connections through Differentiated Services Code Point (DSCP) marks.\nThe RDP Shortpath transport allows limiting outbound network traffic...",
                    "title": "RDP Shortpath for Azure Virtual Desktop",
                    "confidence": "High",
                    "source": "conceptual",
                    "resultType": "Documentation",
                    "rank": 1,
                    "link": "https://docs.microsoft.com/en-us/azure/virtual-desktop/rdp-shortpath#key-benefits"
                  }
                ],
                "replacementKey": "\u003C!--080d6e85-2a49-4bf7-9668-20da3efaa2b8--\u003E"
              }
            ]
          },
          "sections": [],
          "solutionId": "keyvault-lostdeletedkeys-apollo-solution",
          "provisioningState": "PartialComplete"
        }
      }
    },
    {
      "RequestUri": "https://management.azure.com/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba/resourceGroups/DiagnosticsRp-Gateway-Public-Dev-Global/providers/Microsoft.KeyVault/vaults/DiagRpGwPubDev/providers/Microsoft.Help/solutions/testResource8607?api-version=2023-09-01-preview",
      "RequestMethod": "GET",
      "RequestHeaders": {
        "Accept": "application/json",
        "Authorization": "Sanitized",
        "traceparent": "00-2a26814c4b8b664220b9cfe290d4a420-7191865bfc09ccfc-00",
        "User-Agent": "azsdk-net-ResourceManager.SelfHelp/1.1.0-alpha.20231024.1 (.NET 6.0.23; Microsoft Windows 10.0.22621)",
        "x-ms-client-request-id": "ec5ce9b46a710416fbfc3896a6686187",
        "x-ms-return-client-request-id": "true"
      },
      "RequestBody": null,
      "StatusCode": 200,
      "ResponseHeaders": {
        "Cache-Control": "no-cache",
        "Content-Length": "6089",
        "Content-Type": "application/json; charset=utf-8",
        "Date": "Tue, 24 Oct 2023 13:19:28 GMT",
        "Expires": "-1",
        "Pragma": "no-cache",
        "Server": "Microsoft-IIS/10.0",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains",
        "Vary": "Accept-Encoding",
        "X-Content-Type-Options": "nosniff",
        "x-ms-correlation-request-id": "ccebd75b-aba6-4ce8-b93b-3a68209d6267",
        "x-ms-ratelimit-remaining-subscription-resource-requests": "498",
        "x-ms-request-id": "ccebd75b-aba6-4ce8-b93b-3a68209d6267",
        "x-ms-routing-request-id": "CENTRALUS:20231024T131928Z:ccebd75b-aba6-4ce8-b93b-3a68209d6267",
        "X-Powered-By": "ASP.NET"
      },
      "ResponseBody": {
        "id": "/subscriptions/6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba/resourceGroups/DiagnosticsRp-Gateway-Public-Dev-Global/providers/Microsoft.KeyVault/vaults/DiagRpGwPubDev/providers/Microsoft.Help/solutions/testResource8607",
        "name": "testResource8607",
        "type": "Microsoft.Help/Solutions",
        "properties": {
          "title": "lost or deleted keys and secrets in key vault",
          "content": "\u003Ch2\u003EResolve issues with soft delete and purge protection in Azure Key Vault\u003C/h2\u003E\n\u003Cp\u003EKey Vault\u0027s soft-delete feature allows recovery of deleted vaults and key vault objects, for example, keys, secrets, and certificates.\u003C/p\u003E\n\u003Cp\u003EThis safeguard offers the following protections:\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003EOnce a secret, key, certificate, or key vault is deleted, it will remain recoverable for a configurable period of 7 to 90 calendar days. If no configuration is specified, the default recovery period will be set to 90 days. This provides users with sufficient time to notice an accidental secret deletion and to respond.\u003C/li\u003E\n\u003Cli\u003ETwo operations must be made to permanently delete a secret. First, a user must delete the object, which puts it into the soft-deleted state. Second, a user must purge the object in the soft-deleted state. The purge operation requires additional access policy permissions. These additional protections reduce the risk of a user accidentally or maliciously deleting a secret or a key vault.\u003C/li\u003E\n\u003Cli\u003ETo purge a secret in the soft-deleted state, a service principal must be granted an additional \u003Cem\u003Epurge\u003C/em\u003E access policy permission. The purge access policy permission isn\u0027t granted by default to any service principal, including key vault and subscription owners, and must be deliberately set. By requiring an elevated access policy permission to purge a soft-deleted secret, it reduces the probability of accidentally deleting a secret.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003EUse the following guidance to resolve common issues with the soft-delete feature, such as not being able to delete a key vault or disabling purge protection, and learn how to enable Key Vault recovery features.\u003C/p\u003E\n\u003Ch3\u003EKey Vault diagnostics\u003C/h3\u003E\n\u003Cp\u003EThe following diagnostics check for any Key Vault issues related to throttling or unauthorized access.\u003C/p\u003E\n\u003C!--30929da5-14c9-433b-99b4-c73771d046c8--\u003E\n\u003Ch3\u003ESoft-delete feature overview\u003C/h3\u003E\n\u003Cul\u003E\n\u003Cli\u003ESee \u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-ovw-soft-delete\u0022\u003EAzure Key Vault soft-delete overview\u003C/a\u003E to learn about backup and restore behavior while using Key Vault\u0027s soft-delete feature.\u003C/li\u003E\n\u003Cli\u003ESee \u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/general/soft-delete-overview#purge-protection\u0022\u003EPurge Protection\u003C/a\u003E.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Ch3\u003ECommon issues and solutions\u003C/h3\u003E\n\u003Cp\u003E\u003Cstrong\u003EWhy can\u0027t I purge a deleted key vault and disable purge protection?\u003C/strong\u003E\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003EWhen purge protection is enabled, a vault or an object in the deleted state can\u0027t be purged until the retention period has passed. Once the retention period elapses, the key vault or key vault object will be purged automatically.\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\u003Cstrong\u003ENote\u003C/strong\u003E: Once purge protection is enabled, it can\u0027t be disabled or overridden by anyone, including Microsoft.\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003EYou must wait for the mandatory retention period to elapse before you\u0027re able to permanently delete your key vault or secrets.\u003C/p\u003E\n\u003C/li\u003E\n\u003Cli\u003E\u003Cp\u003EEnsure there is no Azure policy or resource lock in place; you must remove any resource locks to delete a key vault.\u003C/p\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\u003Cstrong\u003EWhy can\u0027t I recover a deleted key vault?\u003C/strong\u003E\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cp\u003EIf you deleted a key vault, it\u0027ll exist in the soft-deleted state if you had soft delete enabled on the key vault and if the retention period hasn\u0027t elapsed.\n\u003Cstrong\u003EIf you didn\u0027t have soft delete enabled, or the soft-delete retention period has elapsed, your key vault has been permanently deleted.\u003C/strong\u003E\u003C/p\u003E\n\u003C/li\u003E\n\u003Cli\u003E\u003Cp\u003EUse this reference to \u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/general/key-vault-recovery?tabs=azure-portal#list-recover-or-purge-a-soft-deleted-key-vault\u0022\u003Elist and recover a deleted key vault\u003C/a\u003E.\u003C/p\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Ch3\u003EResources\u003C/h3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-soft-delete-powershell\u0022\u003EUsing soft-delete with Key Vault with PowerShell\u003C/a\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-soft-delete-cli\u0022\u003EUsing soft-delete with Key Vault with CLI 2.0\u003C/a\u003E\u003C/li\u003E\n\u003Cli\u003E\u003Ca href=\u0022https://docs.microsoft.com/azure/key-vault/key-vault-ovw-security-worlds\u0022\u003EUnderstanding backup and restore behavior in Key Vault\u003C/a\u003E\u003C/li\u003E\n\u003C/ul\u003E\n\u003Ch3\u003ERelevant results from the web\u003C/h3\u003E\n\u003C!--080d6e85-2a49-4bf7-9668-20da3efaa2b8--\u003E\n",
          "replacementMaps": {
            "diagnostics": [
              {
                "solutionId": "KeyVaultUnauthorizedAclInsight",
                "status": "Running",
                "statusDetails": "We are running checks on your resource",
                "replacementKey": "\u003C!--30929da5-14c9-433b-99b4-c73771d046c8--\u003E"
              }
            ],
            "webResults": [
              {
                "searchResults": [
                  {
                    "solutionId": "Msdn_aaee81ff-aacd-4adf-8547-98b8d4e27fa4",
                    "content": "...far the connect button is still alive. Can anyone for the love of Mic tell me what\u0027s up with this? My previous post on RDP has not been answered...",
                    "title": "Connect RDP",
                    "confidence": "High",
                    "source": "MSDN",
                    "resultType": "Community",
                    "rank": 1,
                    "link": "http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/aaee81ff-aacd-4adf-8547-98b8d4e27fa4/"
                  },
                  {
                    "solutionId": "articles|virtual-desktop|rdp-shortpath.md",
                    "content": "...RDP Shortpath brings support for configuring Quality of Service (QoS) priority for RDP connections through Differentiated Services Code Point (DSCP) marks.\nThe RDP Shortpath transport allows limiting outbound network traffic...",
                    "title": "RDP Shortpath for Azure Virtual Desktop",
                    "confidence": "High",
                    "source": "conceptual",
                    "resultType": "Documentation",
                    "rank": 1,
                    "link": "https://docs.microsoft.com/en-us/azure/virtual-desktop/rdp-shortpath#key-benefits"
                  }
                ],
                "replacementKey": "\u003C!--080d6e85-2a49-4bf7-9668-20da3efaa2b8--\u003E"
              }
            ],
            "metricsBasedCharts": []
          },
          "sections": [],
          "solutionId": "keyvault-lostdeletedkeys-apollo-solution",
          "provisioningState": "PartialComplete"
        }
      }
    }
  ],
  "Variables": {
    "AZURE_AUTHORITY_HOST": "https://login.microsoftonline.com",
    "RandomSeed": "622461385",
    "RESOURCE_MANAGER_URL": null,
    "SUBSCRIPTION_ID": "6bded6d5-a6af-43e1-96d3-bf71f6f5f8ba"
  }
}
